name: Trigger Webhook

on:
  push:
    branches:
      - main
jobs:
  send-webhook:
    runs-on: ubuntu-latest
    steps:
      - name: Send webhook to target server
        run: |
          curl -X POST https://120e-2401-4900-88e1-63e1-e9b1-3008-136e-cafc.ngrok-free.app/webhook \
          -H "Content-Type: application/json" \
          -d '{
                "repository": {
                  "name": "action-repo"
                },
                "pusher": {
                  "name": "techstax-user"
                },
                "head_commit": {
                  "message": "Initial push from GitHub Actions"
                },
                "ref": "refs/heads/main",
                "timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"
              }'

